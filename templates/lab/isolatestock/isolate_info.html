{% extends 'lab/base.html' %}
{% block title %}Isolate Info{% endblock %}
{% block body_block %}

{% if isolate_info %}
  <div class="hero-unit">
    <h1>Isolate Stock Info: <a href="{% url 'single_isolate_info' isolate_info.id %}">{{isolate_info.isolate_id}}</a></h1>
  </div>

  <hr>
  <a href="{% url 'update_iso_info' isolate_info.id %}"><input class="btn btn-info" type="submit" name="submit" value="Update Isolate Information"/></a>
  <a href="{% url 'log_data_online' 'glycerol_stock' %}"><input class="btn btn-warning" type="submit" name="submit" value="Add new Glycerol Stock"/></a>
  <a href="{% url 'iso_inventory' %}"><input class="btn btn-danger" type="submit" name="submit" value="Return to IsolateStock table"/></a>
  <hr>



  <h2>Isolate Stock</h2>
  <table id="isolate_info" class="table table-striped table-bordered" cellspacing="0" widtd="100%">
    <thead>
      <tr>
        <td>Isolate Stock ID</td>
        <td>Isolate Name</td>
        <td>Disease</td>
        <td>Plant Organ</td>
        <td>Genus</td>
        <td>Alias</td>
        <td>Race</td>
        <td>Subtaxa</td>
        <td>Passport</td>
        <td>Comments</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="{% url 'single_isolate_info' isolate_info.id %}">{{ isolate_info.isolate_id }}</a></td>
        <td>{{ isolate_info.isolate_name }}</td>
        <td><a href="{% url 'single_disease_info' isolate_info.disease_info.id %}">{{ isolate_info.disease_info.common_name }}</a></td>
        <td>{{ isolate_info.plant_organ }}</td>
        <td>{{ isolate_info.passport.taxonomy.genus }}</td>
        <td>{{ isolate_info.passport.taxonomy.alias }}</td>
        <td>{{ isolate_info.passport.taxonomy.race }}</td>
        <td>{{ isolate_info.passport.taxonomy.subtaxa }}</td>
        <td><a href="{% url 'passport' isolate_info.passport.id %}">{{ isolate_info.passport.id }}</a></td>
        <td>{{ isolate_info.comments }}</td>
      </tr>
    </tbody>
  </table>

  {% for t in obs_tracker %}
    {% if t.obs_entity_type == 'isolate' %}
      {% include 'lab/tracker_info_table.html' with obs_tracker=obs_tracker %}
    {% endif %}
  {% endfor %}
  <br/>

  {% if obs_tracker %}
  <h2>IsolateStock Used For</h2>
  <table class="selected_stocks" class="table table-striped table-bordered" cellspacing="0" widtd="100%">
    <thead>
      <tr>
        <td>Obs Type</td>
        <td>Obs ID</td>
        <td>Experiment</td>
      </tr>
    </thead>
    <tbody>
      {% for t in obs_tracker %}
      <tr>
        <td>{{ t.obs_entity_type }}</td>
        <td><a href='{{ t.obs_id_url }}'>{{ t.obs_id }}</a></td>
        <td><a href='/lab/experiment/{{t.experiment}}/'>{{ t.experiment }}</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <hr>
  <h2><small>Not Used In Any Data!</small></h2>
  <hr>
  {% endif %}

<div class="well well-sm">
  {% if assocated_isolates %}
    <h3>Associated Isolates</h3>
      <table id="single_stock_isolate_table" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Isolate ID</th>
            <th>Storage Location</th>
            <th>Collection Date</th>
            <th>Extract Color</th>
            <th>Organism</th>
            <th>Comments</th>
          </tr>
        </thead>
        <tbody>
          {% for iso in assocated_isolates %}
          <tr>
            <td><a href="{% url 'single_glycerol_stock_info' iso.id %}">{{ iso.glycerol_stock_id }}</a></td>
            <td>{{ iso.location.location_name }}</td>
            <td>{{ iso.stock_date }}</td>
            <td>{{ iso.extract_color }}</td>
            <td>{{ iso.organism }}</td>
            <td>{{ iso.comments }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
  {% else %}
    <h3><small>No Associated Isolates</small></h3>
  {% endif %}
  </div>

{% else %}
  <div class="hero-unit">
    <h1>Isolate Info: <a href='/lab/'>Not Found!</a></h1>
  </div>
  <h2>No Isolate Info Found!</h2>
{% endif %}

{% endblock %}
